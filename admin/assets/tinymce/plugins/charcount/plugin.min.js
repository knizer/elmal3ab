var initialized=[];tinymce.PluginManager.add("charcount",function(e){var n=e.id;-1==$.inArray(n,initialized)&&(initialized.push(n),e.on("init",function(){var a=$("#"+n),t=(parseInt(a.attr("maxlength")),e.theme.panel&&e.theme.panel.find("#statusbar")[0]),i=function(){var n=e.getContent({format:"raw"});return n=n.replace(/\.\.\./g,""),n=n.replace(/<.[^<>]*?>/g,"").replace(/&nbsp;|&#160;/gi," "),n=n.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g,""),n.length};t.insert({type:"label",name:"charcount",text:["الحروف:{0}",i()],classes:"charcount",disabled:e.settings.readonly},0),e.on("keyup",function(){e.theme.panel.find("#charcount").text(["الحروف:{0}",i()])})}))});